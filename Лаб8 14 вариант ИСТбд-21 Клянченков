import matplotlib.pyplot as plt

# Пример данных о банковских вкладах
deposits = [
    {'id': 1, 'type': 'сберегательный', 'amount': 5000},
    {'id': 2, 'type': 'накопительный', 'amount': 15000},
    {'id': 3, 'type': 'сберегательный', 'amount': 25000},
    {'id': 4, 'type': 'накопительный', 'amount': 35000},
    {'id': 5, 'type': 'сберегательный', 'amount': 45000},
    {'id': 6, 'type': 'накопительный', 'amount': 55000},
    {'id': 7, 'type': 'сберегательный', 'amount': 65000},
    {'id': 8, 'type': 'накопительный', 'amount': 75000},
]


# Функция сегментации по видам вкладов
def segment_by_type(deposits):
    segmentation = {}
    for deposit in deposits:
        deposit_type = deposit['type']
        if deposit_type not in segmentation:
            segmentation[deposit_type] = []
        segmentation[deposit_type].append(deposit)
    return segmentation


# Визуализация сегментации по видам вкладов
def visualize_by_type(segmentation):
    labels = segmentation.keys()
    sizes = [len(segmentation[deposit_type]) for deposit_type in labels]

    plt.figure(figsize=(8, 8))
    plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=140)
    plt.title('Сегментация вкладов по видам')
    plt.show()


# Функция сегментации по типам вкладов (мелкие, средние, крупные)
def segment_by_amount(deposits):
    segmentation = {'мелкие': [], 'средние': [], 'крупные': []}
    for deposit in deposits:
        amount = deposit['amount']
        if amount < 20000:
            segmentation['мелкие'].append(deposit)
        elif 20000 <= amount < 50000:
            segmentation['средние'].append(deposit)
        else:
            segmentation['крупные'].append(deposit)
    return segmentation


# Визуализация сегментации по типам вкладов
def visualize_by_amount(segmentation):
    labels = segmentation.keys()
    sizes = [len(segmentation[amount_type]) for amount_type in labels]

    plt.figure(figsize=(8, 8))
    plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=140)
    plt.title('Сегментация вкладов по типам (мелкие, средние, крупные)')
    plt.show()


# Пример использования функций
segmentation_by_type = segment_by_type(deposits)
visualize_by_type(segmentation_by_type)

segmentation_by_amount = segment_by_amount(deposits)
visualize_by_amount(segmentation_by_amount)
